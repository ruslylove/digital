\documentclass[border=10pt]{standalone}
\usepackage{circuitikz}
\usetikzlibrary{calc}

\begin{document}
\begin{circuitikz}[american, scale=1.0]
    \ctikzset{logic ports=ieee}
    
    % Define register style as requested
    \tikzset{
        register/.style={
            draw, 
            rectangle, 
            minimum width=2.5cm, 
            minimum height=1.5cm, 
            fill=white,
            align=center,
            font=\small
        }
    }
    
    % Nodes
    \node[register] (RegA) at (0, 0) {Register A};
    \node[register] (RegB) at (5, 0) {Register B};
    
    % Control Signals
    \node (clk_in) at (-2, -1.6) {Clock};
    \node (shift_ctrl) at (-2, 1.8) {Shift Control};
    
    % Register Pins (Manual placement relative to node)
    % Reg A
    \coordinate (A_SI) at ($(RegA.west) + (0, 0.3)$); % Serial In
    \coordinate (A_SO) at ($(RegA.east) + (0, 0.3)$); % Serial Out
    \coordinate (A_CLK) at ($(RegA.south) + (-0.5, 0)$); % Clock
    \coordinate (A_Shift) at ($(RegA.north) + (0, 0)$); % Shift En
    
    % Reg B
    \coordinate (B_SI) at ($(RegB.west) + (0, 0.3)$); % Serial In
    \coordinate (B_SO) at ($(RegB.east) + (0, 0.3)$); % Serial Out
    \coordinate (B_CLK) at ($(RegB.south) + (-0.5, 0)$); % Clock
    \coordinate (B_Shift) at ($(RegB.north) + (0, 0)$); % Shift En
    
    % Pin Labels
    \node[right, font=\tiny] at (A_SI) {SI};
    \node[left, font=\tiny] at (A_SO) {SO};
    \node[above, font=\tiny] at (A_CLK) {CLK};
    \node[below, font=\tiny] at (A_Shift) {Shift};
    
    \node[right, font=\tiny] at (B_SI) {SI};
    \node[left, font=\tiny] at (B_SO) {SO};
    \node[above, font=\tiny] at (B_CLK) {CLK};
    \node[below, font=\tiny] at (B_Shift) {Shift};

    % Triangle for Clock
    \node[shape=inputarrow, rotate=90, scale=0.5] at (A_CLK) {};
    \node[shape=inputarrow, rotate=90, scale=0.5] at (B_CLK) {};
    
    % Connections
    
    % Clock Distribution
    \draw (clk_in) -- (clk_in -| A_CLK) -- (A_CLK);
    \draw (clk_in -| A_CLK) -- (clk_in -| B_CLK) -- (B_CLK);
    \node[circ] at (clk_in -| A_CLK) {};
    
    % Shift Control Distribution
    \draw (shift_ctrl) -- (shift_ctrl -| A_Shift) -- (A_Shift);
    \draw (shift_ctrl -| A_Shift) -- (shift_ctrl -| B_Shift) -- (B_Shift);
    \node[circ] at (shift_ctrl -| A_Shift) {};

    % Data Transfer: Reg A SO -> Reg B SI
    \draw (A_SO) -- (RegB.west |- A_SO); % Direct connect to B SI
    
    % Feedback Loop: Reg A SO -> Reg A SI
    % Tap off the line from A_SO
    \draw (A_SO) -- ++(1, 0) coordinate (tap);
    \node[circ] at (tap) {};
    \draw (tap) -- ++(0, 1) coordinate (turn1);
    \draw (turn1) -- ($(A_SI) + (-1, 1)$) coordinate (turn2);
    % We need to connect to A_SI, but A_SI is on the left edge.
    % We should go around to the left.
    \draw (turn2) -- ($(A_SI) + (-1, 0)$) coordinate (turn3) -- (A_SI);
    \draw (turn2) -- (turn3); % Ensure connected
    
\end{circuitikz}
\end{document}
